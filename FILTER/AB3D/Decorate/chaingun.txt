ACTOR Vanilla_Chaingun : Chaingun
{
	States
	{
	Fire:
		TNT1 A 0 A_JumpIf(GetCVAR("evw_weapons")==1, "Fire.Enhanced")
		CHGG A 0 A_PlaySound("weapons/chngun", CHAN_WEAPON)
		CHGG A 0 A_GunFlash
		CHGG A 4 A_FireBullets(3, 0, 1, 10, "BulletPuff")
		CHGG B 0 A_PlaySound("weapons/chngun", CHAN_WEAPON)
		CHGG B 0 A_GunFlash("Flash2")
		CHGG B 4 A_FireBullets(3, 0, 1, 20, "BulletPuff")
		CHGG B 0 A_ReFire
		Goto Ready
	Fire.Enhanced:
		CHGG A 0 A_PlaySound("weapons/chaingun/fire", CHAN_WEAPON)
		CHGG A 0 A_GunFlash
		CHGG A 4 A_FireBullets(3, 0, 1, 20, "EnBulletPuff")
		CHGG B 0 A_PlaySound("weapons/chaingun/fire", CHAN_WEAPON)
		CHGG B 0 A_GunFlash("Flash2")
		CHGG B 4 A_FireBullets(3, 0, 1, 20, "EnBulletPuff")
		CHGG B 0 A_ReFire
		Goto Ready
	Flash:
		TNT1 A 0 A_JumpIf(GetCVAR("evw_tracers")==false, "Flash.Vanilla")
		TNT1 A 0 A_FireProjectile("BulletTracer",random(-1,1),0,0,0,FPF_NOAUTOAIM,random(-1,1))
	Flash2:
		TNT1 A 0 A_JumpIf(GetCVAR("evw_tracers")==false, "Flash2.Vanilla")
		TNT1 A 0 A_FireProjectile("BulletTracer",random(-1,1),0,0,0,FPF_NOAUTOAIM,random(-1,1))
	Flash.Vanilla:
		CHGF A 4 Bright A_Light1
		Goto LightDone
	Flash2.Vanilla:
		CHGF B 4 Bright A_Light2
		Goto LightDone
	}
}

Actor ChaingunSpawner
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_JumpIfInventory("Vanilla_Chaingun",1,"SSGDropChance",AAPTR_PLAYER1)
	DropChaingun:
		TNT1 A 0 A_SpawnItem("Vanilla_Chaingun")
		Stop
	SSGDropChance:
		TNT1 A 0 A_Jump("150", "DropChaingun")
		TNT1 A 0 A_SpawnItem("Vanilla_SuperShotgun")
	}
}