ACTOR Vanilla_Pistol : Pistol
{
	States
	{
	Fire:
		PISG A 4
		TNT1 A 0 A_JumpIf(GetCVAR("evw_weapons")==1, "Fire.Enhanced")
		PISG B 0 A_PlaySound("weapons/pistol", CHAN_WEAPON)
		PISG B 0 A_GunFlash
		PISG B 6 A_FireBullets(5.6, 0, 1, 5, "BulletPuff")
		PISG C 4
		PISG B 5 A_ReFire
		Goto Ready
	Fire.Enhanced:
		PISG B 0 A_PlaySound("weapons/pistol/fire", CHAN_WEAPON) //Enhanced sound
		PISG B 0 A_GunFlash
		PISG B 6 A_FireBullets(5.6, 0, 1, 5, "EnBulletPuff") //Enhanced hit puffs
		PISG C 4
		PISG B 5 A_ReFire
 		TNT1 A 0 A_SpawnItemEx("WeaponSmoke",cos(pitch)*25,0,sin(-pitch)*25+random(33,36),		0,0,1,0)
		Goto Ready
	Flash:
		TNT1 A 0 A_JumpIf(GetCVAR("evw_tracers")==false, "Flash.Vanilla")
		TNT1 A 0 A_FireProjectile("BulletTracer",random(-1,1),0,0,0,FPF_NOAUTOAIM,random(-1,1))
	Flash.Vanilla:
		PISF A 7 Bright A_Light1
		Goto LightDone
		PISF A 7 Bright A_Light1
		Goto LightDone
	}
}

Actor PistolSpawner
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_JumpIfInventory("Vanilla_Pistol",1,"DropClip",AAPTR_PLAYER1)
	DropPistol:
		TNT1 A 0 A_DropItem("Vanilla_Pistol")
		Stop
	DropClip:
		TNT1 A 0 A_DropItem("Vanilla_Clip")
		TNT1 A 0 A_Jump(50, "DropPistol")
		Stop
	}
}

Actor PistolSpawner2
{
	States
	{
	Spawn:
		TNT1 A 0
		TNT1 A 0 A_JumpIfInventory("Vanilla_Pistol",1,"CheckForChainSaw",AAPTR_PLAYER1)
		TNT1 A 0 A_Jump(256, "DropPistol", "DropShotgun")
		Stop
	CheckForChainSaw:
		TNT1 A 0 A_JumpIfInventory("Vanilla_ChainSaw",1,"DropShotgun",AAPTR_PLAYER1)
		TNT1 A 0 A_SpawnItem("Vanilla_ChainSaw")
		Stop
	DropPistol:
		TNT1 A 0 A_SpawnItem("Vanilla_Pistol")
		Stop
	DropShotgun:
		TNT1 A 0 A_SpawnItem("Vanilla_Shotgun")
		Stop
	}
}